"""
Portable file locking utilities.

Based partially on an example by Jonathan Feignberg in the Python
Cookbook [1] (licensed under the Python Software License) and a ctypes port by 
Anatoly Techtonik for Roundup [2] (license [3]).

[1] https://code.activestate.com/recipes/65203/
[2] https://sourceforge.net/p/roundup/code/ci/default/tree/roundup/backends/portalocker.py  # NOQA
[3] https://sourceforge.net/p/roundup/code/ci/default/tree/COPYING.txt

Example Usage::

    >>> import portalocker
    >>> with open('./file', 'wb') as f:
    ...     portalocker.lock(f, portalocker.LOCK_EX)
    ...     f.write(b'Django')
"""

import os
import portalocker  # Importing portalocker for file locking

__all__ = ("LOCK_EX", "LOCK_SH", "LOCK_NB", "lock", "unlock")

LOCK_SH = portalocker.LOCK_SH  # Shared lock
LOCK_NB = portalocker.LOCK_NB  # Non-blocking lock
LOCK_EX = portalocker.LOCK_EX  # Exclusive lock

def lock(f, flags):
    """Lock the specified file."""
    portalocker.lock(f, flags)

def unlock(f):
    """Unlock the specified file."""
    portalocker.unlock(f)
